<html><head><meta http-equiv="content-type" content="text/html; charset=Shift_JIS"><title>PL/0'コンパイラのJavaCC版</title></head><body><h1>PL/0'コンパイラのJavaCC版</h1><hr><p>PL/0'コンパイラをJavaで書いたものをもとにして、<a href="https://javacc.org/">JavaCC</a>でparserを作り直したものです．<br>JavaCCでは、字句規則と構文規則を一つのファイルに記述します。構文規則は、recursive descent parserを記述するような形で書けばよく、その構文規則の途中に意味規則を書いていけばよいです。各非終端記号には1つのrecursiveな関数が対応します。それをPL/0'用に書いたものが<a href="./PL0javacc/pl0.jj.txt">pl0.jj</a>です。</p><p>yaccのようなLRパーサ生成系では、基本的には合成属性しか使えず、相続属性が書きにくいです。<br>それに対して、recursive descent parserでは、相続属性は非終端記号に対応する関数の引数とすればよいです。<br>さらに、recursive descent parserとする場合は、構文規則を正規右辺文法の形で書くことができるので、圧縮した形で書くことができます。</p><p>なお、JavaCCはLL(k)文法を扱うことができますが、デフォルトではlookaheadは1つしかしていません。<br>したがって、LL(1)文法になっていない部分についてはlookaheadの仕方を指定する必要があります。<br>PL/0'の文法では、非終端記号factorについて2トークンのlookaheadが必要ですので、factorメソッドでそれを指定しています。</p><p>このPL/0'では、変数名などの識別子に日本語の名前が使えるようになっています。そのためには<a href="./PL0javacc/pl0.jj.txt">pl0.jj</a>の最初に<br><br>　　options {<br>　　　　UNICODE_INPUT=true;<br>　　}<br><br>としておいて、識別子の定義の中で<br><br>　　"\u3041"-"\u3093","\u4e00"-"\u9fa5"<br><br>などとして、平仮名や漢字のUNICODEの範囲を書けばよいです。</p><p>Java版のプログラムファイルのうちTable.javaとCodeGen.java, CodeGenB.javaはほとんどそのまま使い、GetSource.javaはそれらから使われている部分だけを残して、それ以外は削除しました。<br>ただし、JavaCCが生成するメソッドはstaticメソッドなので、それにあわせてTable.javaとGetSource.javaのメソッドはstaticとしました。CodeGen.javaとCodeGenB.javaはそのどちらかのインスタンスを作ることになるので、それらのメソッドはインスタンスメソッドのままとしました。</p><p>使い方はJava版と同じで<br><br>　　　$　java　pl0/PL0　オプション指定　ソースファイル名<br><br>です．parser generatorを使うとJava版のようなきめ細かいエラーチェックや出力が難しいので、それらは省略しています。<br><br>オプション指定は'-'で始まる1つの文字列で，その中に<br><ul><li>文字's'があれば記号表をブロックごとに印字し，<br></li><li>文字'o'があれば目的コードを印字し，<br></li><li>文字't'があれば目的コードの実行のトレースを印字し，<br></li><li>文字'b'があれば目的コードをバイトコード型にする．<br></li></ul></p><hr><h2>ソースリスト</h2><ul><li><a href="./PL0javacc/CodeGen.java">CodeGen.java</a></li><li><a href="./PL0javacc/CodeGenB.java">CodeGenB.java</a></li><li><a href="./PL0javacc/GetSource.java">GetSource.java</a> </li><li><a href="./PL0javacc/PL0.java">PL0.java</a></li><li><a href="./PL0javacc/Table.java">Table.java</a></li><li><a href="./PL0javacc/Compile.java">Compile.java</a></li><li><a href="./PL0javacc/CompileConstants.java">CompileConstants.java</a></li><li><a href="./PL0javacc/CompileTokenManager.java">CompileTokenManager.java</a></li><li><a href="./PL0javacc/ParseException.java">ParseException.java</a></li><li><a href="./PL0javacc/SimpleCharStream.java">SimpleCharStream.java</a></li><li><a href="./PL0javacc/Token.java">Token.java</a></li><li><a href="./PL0javacc/TokenMgrError.java">TokenMgrError.java</a></li></ul><p>このうち、Compile.java以降のファイルは<a href="./PL0javacc/pl0.jj.txt">pl0.jj</a>をJavaCCが処理した結果生成されたものです。</p><hr><h2>サンプルプログラム</h2><p><ul><li><a href="./PL0javacc/mult.p.txt">mult.p</a></li></ul></p><hr><p><a href="../main.html">戻る</a><br></p></body></html>