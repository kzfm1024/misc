付録CD-ROMについて

■付録CD-ROMの内容
　この付録CD-ROMには、『明快入門コンパイラ・インタプリタ開発』（林晴比古著、ソフ
トバンク クリエイティブ刊）で作成したサンプルプログラムを収録しています。
　付録CD-ROMに収録したソースコードは、本書に掲載のサンプルプログラムを、読者が手
で入力する手間を省くためにサービス提供するものであり、動作を保証するものではあり
ません。

■サンプル利用上の注意

(1) このCD-ROMには以下のプログラムが格納されています。いずれもWindows用のソースプ
ログラムです。インストーラなどはありませんので、これらのファイルをディスク上の適
切なフォルダにコピーしてご利用ください。

    cci.h       命令コードや記号表およびマクロなどの定義
    cci_prot.h  全関数のプロトタイプ
    cci.c       メイン処理
    cci_pars.c  構文解析
    cci_tkn.c   トークン処理
    cci_tbl.c   記号表処理
    cci_code.c  コード生成とメモリ管理と解釈実行
    cci_misc.c  エラー出力などの雑関数
    ccimake.bat Windows/Visual C++でコンパイルするためのバッチファイル
    cci.exe     コンパイル済み実行可能ファイル（Windowsコマンドプロンプト用）

    cp_add.c    CCI-C用サンプルプログラム
    cp_prime.c  CCI-C用サンプルプログラム
    cp_qsort.c  CCI-C用サンプルプログラム
    cp_base.c   CCI-C用サンプルプログラム

    token_p.c   字句解析プログラム（本書掲載）
    polish_p.c  逆ポーランド記法プログラム（本書掲載）
    minicalc.c  電卓プログラム（本書掲載）

(2) 同梱のccimake.batを使うと、Windows + Visual C++ でコンパイルできます。ほかの
コンパイラを使うときは、ccimake.batの内容を参考にしてください。
　Windows以外の環境でコンパイルするときは文字のエンコードを適切に変換してください。
　LinuxやMac OS Xでは、nkfコマンドを使ってエンコード変換ができます。
　nkfコマンドで、シフトJISをUTF-8に変換してutfディレクトリに出力する例を示します。

    nkf -Lu -S -w cci.c > utf/cci.c

    -S   変換元がシフトJISである指定
    -w   変換先がUTF-8である指定
    -Lu  改行コードをUnix風LFコードに変換する指定

　なおLinuxやMac OS Xでは、コンソールのエンコードを変更できるので、これをシフトJIS
にすれば、ソースコードを変換する必要はありません。

(3) cci_misc.cにあるis_kanji()関数とget_kanji_mode()関数は、漢字判定（全角文字判
定）を行なうもので、シフトJIS、EUC-JP、UTF-8の各エンコードに自動対応させています。
これらのエンコードであれば、両関数はそのまま利用できます。

(4) CCI-Cのコンパイルと動作は、次の環境で確認しています。

    Windows Vista + Visual Studio 2008(Visual C++)
    Windows7 + Visual Studio 2008(Visual C++)
    Windows7(64ビット版) + Visual Studio 2008(Visual C++)
    CentOS 5.2 (Linux) + GNU C
    Fedora 12(Linux) + gcc
    Fedora 12((Linux,x64) + gcc
    Mac OS X 10.6 + GNU C

    注：64ビットコンパイラでは「adrs = mallocG((int)strlen(s) + 1);」のように、
       (int)キャストを入れないと警告される場合があるが、本ソースプログラムでは
       その記述は入れていない。

(5) このCD-ROMは、読者が本書掲載ソースプログラムを入力する負担を、軽減する目的で
提供しています。動作の完全性を保証するものではないことをご理解の上でご利用くださ
い。


■付録CD-ROMの収録内容に関する注意事項
・本書のサンプルプログラムは、学習を補助するために提供されているものであり、実務
　・業務用途での使用を前提としたものではありません。
・本書を購入された読者が、学習のためにコンピュータにインストールすること、予備の
　複製（バックアップ）を作ることのみを許諾し、第三者に配布する行為を禁じます。
・サンプルプログラムは、自己の責任において運用してください。サンプルプログラムを
　運用した結果生じたいかなる障害・損害について、筆者・出版社はその責を負いません。
・サンプルプログラムに対して、ウイルスチェックを行っていますが、これにより筆者・
　出版社がウイルスの不存在を保証するものではありません。
・学習用途で教育機関または企業の教育部門などがサンプルプログラムを複製・配布する
　場合は、事前に筆者・出版社の許諾を得る必要があります。詳細は、本書の巻末に記載
　されているソフトバンク クリエイティブ株式会社の「編集部」までお問い合わせくだ
　さい。

